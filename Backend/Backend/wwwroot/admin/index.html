<!doctype html>
<html>
<head>
  <meta charset="utf-8" />
  <title>API Tester - Products</title>
  <style>
    body{font-family:Arial,Helvetica,sans-serif;margin:20px}
    button{margin-right:8px;padding:8px 12px}
    #out{white-space:pre-wrap;background:#f6f8fa;padding:12px;border-radius:6px;border:1px solid #e1e4e8;min-height:120px}
    input, textarea{padding:6px;border:1px solid #ccc;border-radius:4px}
  </style>
</head>
<body>
  <h2>API Tester - Products</h2>
  <div>
    <button onclick="apiGetAll()">GET /api/Product</button>
    <button onclick="apiGetById()">GET /api/Product/{id}</button>
    <button onclick="apiPost()">POST /api/Product</button>
    <button onclick="apiPut()">PUT /api/Product</button>
  <button onclick="apiDelete()">DELETE /api/Product/{id}</button>
  <!-- Stock endpoints -->
  <button onclick="apiSetStock()">PATCH /api/Product/{id}/stock (set)</button>
  <button onclick="apiIncStock()">PATCH /api/Product/{id}/stock/increment</button>
  <button onclick="apiDecStock()">PATCH /api/Product/{id}/stock/decrement</button>
  </div>
  <div style="margin-top:12px">
    <label>Id: <input id="id" type="number" value="1" style="width:80px"></label>
    <label style="margin-left:12px">Name: <input id="name" type="text" value="Prueba"></label>
    <label style="margin-left:12px">Amount: <input id="amount" type="number" value="1" style="width:80px"></label>
  </div>

  <h3>Output</h3>
  <div id="out">Presione un botón para ejecutar una petición</div>

  <script>
    const base = '/api/Product';
    function show(o){ document.getElementById('out').textContent = typeof o === 'string' ? o : JSON.stringify(o, null, 2); }
    async function apiGetAll(){ const r = await fetch(base); show(await r.json()); }
    async function apiGetById(){ const id = document.getElementById('id').value; const r = await fetch(base + '/' + id); show(r.status === 204 ? 'No Content (not found)' : await r.json()); }
    async function apiPost(){ const name = document.getElementById('name').value; const r = await fetch(base, {method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({name})}); show({ status: r.status, body: await maybeJson(r) }); }
    async function apiPut(){ const id = document.getElementById('id').value; const name = document.getElementById('name').value; const r = await fetch(base, {method:'PUT',headers:{'Content-Type':'application/json'},body:JSON.stringify({id: parseInt(id), name})}); show({ status: r.status, body: await maybeJson(r) }); }
  async function apiDelete(){ const id = document.getElementById('id').value; const r = await fetch(base + '/' + id, {method:'DELETE'}); show({ status: r.status, body: r.status === 204 ? 'No Content' : await maybeJson(r) }); }
    
  // Stock helpers
  async function apiSetStock(){ const id = document.getElementById('id').value; const amount = parseInt(document.getElementById('amount').value); const r = await fetch(base + '/' + id + '/stock', {method:'PATCH', headers:{'Content-Type':'application/json'}, body: JSON.stringify({ amount })}); show({ status: r.status, body: await maybeJson(r) }); }
  async function apiIncStock(){ const id = document.getElementById('id').value; const amount = parseInt(document.getElementById('amount').value); const r = await fetch(base + '/' + id + '/stock/increment', {method:'PATCH', headers:{'Content-Type':'application/json'}, body: JSON.stringify({ amount })}); show({ status: r.status, body: await maybeJson(r) }); }
  async function apiDecStock(){ const id = document.getElementById('id').value; const amount = parseInt(document.getElementById('amount').value); const r = await fetch(base + '/' + id + '/stock/decrement', {method:'PATCH', headers:{'Content-Type':'application/json'}, body: JSON.stringify({ amount })}); show({ status: r.status, body: await maybeJson(r) }); }
    async function maybeJson(r){ try { return await r.json(); } catch(e){ return await r.text(); } }
  </script>
</body>
</html>
